#include <stdio.h>
#include "stm32f10x.h"
#include "SWD_host.h"
#include "SWD_flash.h"

#include "Driver_USART.h"
/*SWD引脚定义在DAP_config.h文件中*/

#define sector_size (4096)

// uint32_t Flash_Page_Size = 1024;
// uint32_t Flash_Start_Addr = 0x08000000;
uint32_t Flash_Page_Size = sector_size;
uint32_t Flash_Start_Addr = 0x00000000;

extern uint8_t demo1[988];
//extern uint8_t beep[];
//extern uint8_t led[];

uint8_t beep[]= {
    0x08,0x20,0x00,0x20,0x8d,0x04,0x00,0x00,0x95,0x04,0x00,0x00,0x97,0x04,0x00,0x00,
    0x99,0x04,0x00,0x00,0x9b,0x04,0x00,0x00,0x9d,0x04,0x00,0x00,0x00,0x00,0x00,0x00,
    0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x9f,0x04,0x00,0x00,
    0xa1,0x04,0x00,0x00,0x00,0x00,0x00,0x00,0xa3,0x04,0x00,0x00,0xa5,0x04,0x00,0x00,
    0xa7,0x04,0x00,0x00,0xa7,0x04,0x00,0x00,0xa7,0x04,0x00,0x00,0xa7,0x04,0x00,0x00,
    0xa7,0x04,0x00,0x00,0xa7,0x04,0x00,0x00,0xa7,0x04,0x00,0x00,0xa7,0x04,0x00,0x00,
    0xa7,0x04,0x00,0x00,0xa7,0x04,0x00,0x00,0xa7,0x04,0x00,0x00,0xa7,0x04,0x00,0x00,
    0xa7,0x04,0x00,0x00,0xa7,0x04,0x00,0x00,0xa7,0x04,0x00,0x00,0xa7,0x04,0x00,0x00,
    0xa7,0x04,0x00,0x00,0xa7,0x04,0x00,0x00,0xa7,0x04,0x00,0x00,0xa7,0x04,0x00,0x00,
    0xa7,0x04,0x00,0x00,0xa7,0x04,0x00,0x00,0xa7,0x04,0x00,0x00,0xa7,0x04,0x00,0x00,
    0xa7,0x04,0x00,0x00,0xa7,0x04,0x00,0x00,0xa7,0x04,0x00,0x00,0xa7,0x04,0x00,0x00,
    0xa7,0x04,0x00,0x00,0xa7,0x04,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
    0xa7,0x04,0x00,0x00,0xa7,0x04,0x00,0x00,0xa7,0x04,0x00,0x00,0xa7,0x04,0x00,0x00,
    0xa7,0x04,0x00,0x00,0xa7,0x04,0x00,0x00,0xa7,0x04,0x00,0x00,0x00,0x00,0x00,0x00,
    0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
    0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
    0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
    0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
    0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
    0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
    0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
    0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
    0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
    0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
    0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
    0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
    0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
    0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
    0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
    0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
    0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
    0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
    0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
    0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
    0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
    0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
    0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
    0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
    0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
    0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
    0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
    0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
    0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
    0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
    0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
    0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
    0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
    0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
    0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
    0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
    0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
    0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
    0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
    0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
    0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
    0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
    0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
    0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
    0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
    0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
    0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
    0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
    0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
    0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
    0xdf,0xf8,0x0c,0xd0,0x00,0xf0,0x54,0xf8,0x00,0x48,0x00,0x47,0x95,0x08,0x00,0x00,
    0x08,0x20,0x00,0x20,0x40,0x1e,0x00,0xbf,0x00,0xbf,0x00,0xbf,0x00,0xbf,0x00,0xbf,
    0x00,0xbf,0x00,0xbf,0x00,0xbf,0x00,0xbf,0x00,0xbf,0x00,0xbf,0x00,0xbf,0x00,0xbf,
    0x00,0xbf,0x00,0xbf,0x00,0xbf,0x00,0xbf,0x00,0xbf,0x00,0xbf,0x00,0xbf,0x00,0xbf,
    0x00,0xbf,0x00,0xbf,0x00,0xbf,0x00,0xbf,0x00,0xbf,0x00,0xbf,0x00,0xbf,0x00,0xbf,
    0x00,0xbf,0x00,0xbf,0x00,0xbf,0x00,0xbf,0x00,0xbf,0x00,0xbf,0x00,0xbf,0x00,0xbf,
    0x00,0xbf,0x00,0xbf,0x00,0xbf,0x00,0xbf,0x00,0xbf,0x00,0xbf,0x00,0xbf,0x00,0xbf,
    0x00,0xbf,0x00,0xbf,0x00,0xbf,0x00,0xbf,0x00,0xbf,0x00,0xbf,0x00,0xbf,0x00,0xbf,
    0x00,0xbf,0x00,0xbf,0x00,0xbf,0xc5,0xd1,0x70,0x47,0x00,0x00,0x06,0x48,0x80,0x47,
    0x06,0x48,0x00,0x47,0xfe,0xe7,0xfe,0xe7,0xfe,0xe7,0xfe,0xe7,0xfe,0xe7,0xfe,0xe7,
    0xfe,0xe7,0xfe,0xe7,0xfe,0xe7,0xfe,0xe7,0xe5,0x04,0x00,0x00,0x01,0x04,0x00,0x00,
    0x06,0x4c,0x07,0x4d,0x06,0xe0,0xe0,0x68,0x40,0xf0,0x01,0x03,0x94,0xe8,0x07,0x00,
    0x98,0x47,0x10,0x34,0xac,0x42,0xf6,0xd3,0xff,0xf7,0x9e,0xff,0x4c,0x09,0x00,0x00,
    0x6c,0x09,0x00,0x00,0x01,0x48,0x02,0x49,0x08,0x60,0x70,0x47,0x00,0x90,0xd0,0x03,
    0x00,0x00,0x00,0x20,0x10,0xb5,0x00,0xf0,0x09,0xf9,0x10,0xb1,0x5c,0x48,0x5d,0x49,
    0x48,0x67,0x00,0xf0,0x1b,0xf9,0x28,0xb1,0x5b,0x48,0x00,0x68,0xc0,0xf3,0x42,0x30,
    0x5a,0x49,0x08,0x60,0x00,0xf0,0x3c,0xf9,0x28,0xb1,0x59,0x48,0x00,0x68,0x20,0xf0,
    0x80,0x70,0x57,0x49,0x08,0x60,0x00,0xf0,0x4b,0xf9,0x48,0xb1,0x00,0x20,0x55,0x49,
    0x08,0x60,0x4f,0xf0,0x80,0x41,0xc1,0xf8,0x10,0x01,0x50,0x49,0x09,0x1f,0x08,0x60,
    0x00,0xf0,0x68,0xf9,0x18,0xb1,0x03,0x20,0x4c,0x49,0x64,0x31,0x08,0x60,0x00,0xf0,
    0x79,0xf9,0x68,0xb1,0x05,0x20,0x4c,0x49,0x08,0x60,0x01,0x20,0x4a,0x49,0x78,0x31,
    0x08,0x60,0x00,0x20,0x48,0x49,0x08,0x31,0x08,0x60,0x3f,0x20,0x09,0x1f,0x08,0x60,
    0x00,0xf0,0x80,0xf9,0x00,0x28,0x55,0xd0,0x44,0x48,0x00,0x68,0x44,0x49,0x08,0x60,
    0x42,0x48,0x00,0x1d,0x00,0x68,0x09,0x1d,0x08,0x60,0x40,0x48,0x08,0x30,0x00,0x68,
    0x09,0x1d,0x08,0x60,0x3d,0x48,0x0c,0x30,0x00,0x68,0x09,0x1d,0x08,0x60,0x3b,0x48,
    0x10,0x30,0x00,0x68,0x09,0x1d,0x08,0x60,0x38,0x48,0x14,0x30,0x00,0x68,0x09,0x1d,
    0x08,0x60,0x36,0x48,0x18,0x30,0x00,0x68,0x35,0x49,0x20,0x31,0x08,0x60,0x33,0x48,
    0x1c,0x30,0x00,0x68,0x09,0x1d,0x08,0x60,0x30,0x48,0x20,0x30,0x00,0x68,0x09,0x1d,
    0x08,0x60,0x2e,0x48,0x24,0x30,0x00,0x68,0x09,0x1d,0x08,0x60,0x2b,0x48,0x28,0x30,
    0x00,0x68,0x09,0x1d,0x08,0x60,0x29,0x48,0x2c,0x30,0x00,0x68,0x09,0x1d,0x08,0x60,
    0x26,0x48,0x30,0x30,0x00,0x68,0x26,0x49,0x40,0x31,0x08,0x60,0x23,0x48,0x34,0x30,
    0x00,0x68,0x09,0x1d,0x08,0x60,0x21,0x48,0x38,0x30,0x00,0x68,0x09,0x1d,0x08,0x60,
    0x1e,0x48,0x3c,0x30,0x00,0x68,0x09,0x1d,0x08,0x60,0x1c,0x48,0x40,0x30,0x00,0x68,
    0x09,0x1d,0x08,0x60,0x00,0xf0,0x48,0xf8,0x30,0xb1,0x13,0x48,0x14,0x30,0x00,0x68,
    0x00,0xf0,0x4f,0x00,0x17,0x49,0x08,0x60,0x11,0x48,0x74,0x38,0x00,0x68,0x40,0xf4,
    0x70,0x00,0x0f,0x49,0x74,0x39,0x08,0x60,0x00,0xbf,0x00,0xbf,0x00,0xbf,0xbf,0xf3,
    0x4f,0x8f,0x00,0xbf,0x00,0xbf,0x00,0xbf,0x00,0xbf,0x00,0xbf,0x00,0xbf,0xbf,0xf3,
    0x6f,0x8f,0x00,0xbf,0x00,0xbf,0x00,0xbf,0xff,0xf7,0x3c,0xff,0x10,0xbd,0x00,0x00,
    0x0d,0xf0,0xad,0xba,0x00,0xc0,0x07,0x40,0x44,0x02,0x00,0x10,0x3c,0x05,0x00,0x40,
    0xfc,0xed,0x00,0xe0,0x0c,0x01,0x00,0x40,0x10,0x56,0x00,0x40,0x04,0x04,0x00,0x10,
    0x20,0xc5,0x00,0x40,0xe4,0x0e,0x00,0x40,0x02,0xe0,0x08,0xc8,0x12,0x1f,0x08,0xc1,
    0x00,0x2a,0xfa,0xd1,0x70,0x47,0x70,0x47,0x00,0x20,0x01,0xe0,0x01,0xc1,0x12,0x1f,
    0x00,0x2a,0xfb,0xd1,0x70,0x47,0x00,0x00,0x13,0x48,0x00,0x78,0x06,0x28,0x20,0xd1,
    0x11,0x48,0x00,0x1d,0x00,0x78,0x00,0xf0,0x0f,0x00,0xd0,0xb9,0x0e,0x48,0x08,0x30,
    0x00,0x78,0x00,0xf0,0xf0,0x00,0x30,0x28,0x01,0xd1,0x01,0x20,0x70,0x47,0x0a,0x48,
    0x08,0x30,0x00,0x78,0x00,0xf0,0xf0,0x00,0x40,0x28,0x01,0xd1,0x01,0x20,0xf5,0xe7,
    0x05,0x48,0x08,0x30,0x00,0x78,0x00,0xf0,0xf0,0x00,0x50,0x28,0x01,0xd1,0x01,0x20,
    0xec,0xe7,0x00,0x20,0xea,0xe7,0x00,0x00,0xe0,0x0f,0x00,0xf0,0x0a,0x48,0x00,0x78,
    0x06,0x28,0x0e,0xd1,0x08,0x48,0x00,0x1d,0x00,0x78,0x00,0xf0,0x0f,0x00,0x40,0xb9,
    0x05,0x48,0x08,0x30,0x00,0x78,0x00,0xf0,0xf0,0x00,0x30,0x28,0x01,0xd1,0x01,0x20,
    0x70,0x47,0x00,0x20,0xfc,0xe7,0x00,0x00,0xe0,0x0f,0x00,0xf0,0x13,0x48,0x00,0x78,
    0x06,0x28,0x20,0xd1,0x11,0x48,0x00,0x1d,0x00,0x78,0x00,0xf0,0x0f,0x00,0xd0,0xb9,
    0x0e,0x48,0x08,0x30,0x00,0x78,0x00,0xf0,0xf0,0x00,0x30,0x28,0x01,0xd1,0x01,0x20,
    0x70,0x47,0x0a,0x48,0x08,0x30,0x00,0x78,0x00,0xf0,0xf0,0x00,0x40,0x28,0x01,0xd1,
    0x01,0x20,0xf5,0xe7,0x05,0x48,0x08,0x30,0x00,0x78,0x00,0xf0,0xf0,0x00,0x50,0x28,
    0x01,0xd1,0x01,0x20,0xec,0xe7,0x00,0x20,0xea,0xe7,0x00,0x00,0xe0,0x0f,0x00,0xf0,
    0x0a,0x48,0x00,0x78,0x06,0x28,0x0e,0xd1,0x08,0x48,0x00,0x1d,0x00,0x78,0x00,0xf0,
    0x0f,0x00,0x40,0xb9,0x05,0x48,0x08,0x30,0x00,0x78,0x00,0xf0,0xf0,0x00,0x30,0x28,
    0x01,0xd1,0x01,0x20,0x70,0x47,0x00,0x20,0xfc,0xe7,0x00,0x00,0xe0,0x0f,0x00,0xf0,
    0x13,0x48,0x00,0x78,0x06,0x28,0x20,0xd1,0x11,0x48,0x00,0x1d,0x00,0x78,0x00,0xf0,
    0x0f,0x00,0xd0,0xb9,0x0e,0x48,0x08,0x30,0x00,0x78,0x00,0xf0,0xf0,0x00,0x30,0x28,
    0x01,0xd1,0x01,0x20,0x70,0x47,0x0a,0x48,0x08,0x30,0x00,0x78,0x00,0xf0,0xf0,0x00,
    0x40,0x28,0x01,0xd1,0x01,0x20,0xf5,0xe7,0x05,0x48,0x08,0x30,0x00,0x78,0x00,0xf0,
    0xf0,0x00,0x50,0x28,0x01,0xd1,0x01,0x20,0xec,0xe7,0x00,0x20,0xea,0xe7,0x00,0x00,
    0xe0,0x0f,0x00,0xf0,0x0a,0x48,0x00,0x78,0x06,0x28,0x0e,0xd1,0x08,0x48,0x00,0x1d,
    0x00,0x78,0x00,0xf0,0x0f,0x00,0x40,0xb9,0x05,0x48,0x08,0x30,0x00,0x78,0x00,0xf0,
    0xf0,0x00,0x30,0x28,0x01,0xd1,0x01,0x20,0x70,0x47,0x00,0x20,0xfc,0xe7,0x00,0x00,
    0xe0,0x0f,0x00,0xf0,0x0a,0x48,0x00,0x78,0x06,0x28,0x0e,0xd1,0x08,0x48,0x00,0x1d,
    0x00,0x78,0x00,0xf0,0x0f,0x00,0x40,0xb9,0x05,0x48,0x08,0x30,0x00,0x78,0x00,0xf0,
    0xf0,0x00,0x30,0x28,0x01,0xd1,0x01,0x20,0x70,0x47,0x00,0x20,0xfc,0xe7,0x00,0x00,
    0xe0,0x0f,0x00,0xf0,0x0a,0x48,0x00,0x78,0x06,0x28,0x0e,0xd1,0x08,0x48,0x00,0x1d,
    0x00,0x78,0x00,0xf0,0x0f,0x00,0x40,0xb9,0x05,0x48,0x08,0x30,0x00,0x78,0x00,0xf0,
    0xf0,0x00,0x50,0x28,0x01,0xd1,0x01,0x20,0x70,0x47,0x00,0x20,0xfc,0xe7,0x00,0x00,
    0xe0,0x0f,0x00,0xf0,0x0c,0x20,0x00,0xf0,0x2f,0xf8,0x0c,0x20,0x01,0x21,0x81,0x40,
    0x0d,0x4a,0x11,0x60,0x00,0xbf,0x11,0x20,0x00,0xf0,0x26,0xf8,0x11,0x20,0x01,0x21,
    0x81,0x40,0x09,0x4a,0x12,0x1f,0x11,0x60,0x00,0xbf,0x0c,0xe0,0x0c,0x20,0x00,0xf0,
    0x31,0xf8,0x64,0x20,0x00,0xf0,0x0a,0xf8,0x0c,0x20,0x00,0xf0,0x2b,0xf8,0x4f,0xf4,
    0x61,0x70,0x00,0xf0,0x03,0xf8,0xf1,0xe7,0x0c,0x05,0x00,0x50,0x01,0xb5,0x06,0xe0,
    0x00,0x98,0x40,0x1e,0x00,0x90,0x40,0xf2,0xe7,0x30,0xff,0xf7,0x93,0xfd,0x00,0x98,
    0x00,0x28,0xf5,0xd1,0x08,0xbd,0x00,0x00,0xf0,0xb5,0x01,0x21,0x0a,0x46,0x00,0x25,
    0x2c,0x46,0x2b,0x46,0x41,0xea,0x42,0x06,0x46,0xea,0x85,0x06,0x46,0xea,0x04,0x26,
    0x46,0xea,0x03,0x47,0x02,0x4e,0x46,0xf8,0x20,0x70,0x00,0xbf,0xf0,0xbd,0x00,0x00,
    0x00,0x07,0x00,0x50,0x10,0xb5,0x01,0x46,0x01,0x22,0x02,0xfa,0x01,0xf0,0x06,0x4b,
    0x1a,0x68,0x20,0xea,0x02,0x03,0x04,0x4c,0x24,0x1d,0x23,0x60,0x02,0xea,0x00,0x03,
    0x24,0x1d,0x23,0x60,0x00,0xbf,0x10,0xbd,0x04,0x05,0x00,0x50,0x6c,0x09,0x00,0x00,
    0x00,0x00,0x00,0x20,0x04,0x00,0x00,0x00,0x88,0x06,0x00,0x00,0x70,0x09,0x00,0x00,
    0x04,0x00,0x00,0x20,0x04,0x20,0x00,0x00,0x98,0x06,0x00,0x00,0x00,0x90,0xd0,0x03
};

uint8_t led[]= {
    0x08,0x20,0x00,0x20,0x8d,0x04,0x00,0x00,0x95,0x04,0x00,0x00,0x97,0x04,0x00,0x00,
    0x99,0x04,0x00,0x00,0x9b,0x04,0x00,0x00,0x9d,0x04,0x00,0x00,0x00,0x00,0x00,0x00,
    0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x9f,0x04,0x00,0x00,
    0xa1,0x04,0x00,0x00,0x00,0x00,0x00,0x00,0xa3,0x04,0x00,0x00,0xa5,0x04,0x00,0x00,
    0xa7,0x04,0x00,0x00,0xa7,0x04,0x00,0x00,0xa7,0x04,0x00,0x00,0xa7,0x04,0x00,0x00,
    0xa7,0x04,0x00,0x00,0xa7,0x04,0x00,0x00,0xa7,0x04,0x00,0x00,0xa7,0x04,0x00,0x00,
    0xa7,0x04,0x00,0x00,0xa7,0x04,0x00,0x00,0xa7,0x04,0x00,0x00,0xa7,0x04,0x00,0x00,
    0xa7,0x04,0x00,0x00,0xa7,0x04,0x00,0x00,0xa7,0x04,0x00,0x00,0xa7,0x04,0x00,0x00,
    0xa7,0x04,0x00,0x00,0xa7,0x04,0x00,0x00,0xa7,0x04,0x00,0x00,0xa7,0x04,0x00,0x00,
    0xa7,0x04,0x00,0x00,0xa7,0x04,0x00,0x00,0xa7,0x04,0x00,0x00,0xa7,0x04,0x00,0x00,
    0xa7,0x04,0x00,0x00,0xa7,0x04,0x00,0x00,0xa7,0x04,0x00,0x00,0xa7,0x04,0x00,0x00,
    0xa7,0x04,0x00,0x00,0xa7,0x04,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
    0xa7,0x04,0x00,0x00,0xa7,0x04,0x00,0x00,0xa7,0x04,0x00,0x00,0xa7,0x04,0x00,0x00,
    0xa7,0x04,0x00,0x00,0xa7,0x04,0x00,0x00,0xa7,0x04,0x00,0x00,0x00,0x00,0x00,0x00,
    0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
    0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
    0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
    0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
    0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
    0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
    0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
    0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
    0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
    0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
    0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
    0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
    0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
    0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
    0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
    0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
    0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
    0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
    0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
    0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
    0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
    0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
    0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
    0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
    0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
    0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
    0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
    0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
    0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
    0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
    0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
    0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
    0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
    0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
    0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
    0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
    0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
    0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
    0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
    0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
    0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
    0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
    0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
    0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
    0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
    0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
    0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
    0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
    0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
    0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
    0xdf,0xf8,0x0c,0xd0,0x00,0xf0,0x54,0xf8,0x00,0x48,0x00,0x47,0x95,0x08,0x00,0x00,
    0x08,0x20,0x00,0x20,0x40,0x1e,0x00,0xbf,0x00,0xbf,0x00,0xbf,0x00,0xbf,0x00,0xbf,
    0x00,0xbf,0x00,0xbf,0x00,0xbf,0x00,0xbf,0x00,0xbf,0x00,0xbf,0x00,0xbf,0x00,0xbf,
    0x00,0xbf,0x00,0xbf,0x00,0xbf,0x00,0xbf,0x00,0xbf,0x00,0xbf,0x00,0xbf,0x00,0xbf,
    0x00,0xbf,0x00,0xbf,0x00,0xbf,0x00,0xbf,0x00,0xbf,0x00,0xbf,0x00,0xbf,0x00,0xbf,
    0x00,0xbf,0x00,0xbf,0x00,0xbf,0x00,0xbf,0x00,0xbf,0x00,0xbf,0x00,0xbf,0x00,0xbf,
    0x00,0xbf,0x00,0xbf,0x00,0xbf,0x00,0xbf,0x00,0xbf,0x00,0xbf,0x00,0xbf,0x00,0xbf,
    0x00,0xbf,0x00,0xbf,0x00,0xbf,0x00,0xbf,0x00,0xbf,0x00,0xbf,0x00,0xbf,0x00,0xbf,
    0x00,0xbf,0x00,0xbf,0x00,0xbf,0xc5,0xd1,0x70,0x47,0x00,0x00,0x06,0x48,0x80,0x47,
    0x06,0x48,0x00,0x47,0xfe,0xe7,0xfe,0xe7,0xfe,0xe7,0xfe,0xe7,0xfe,0xe7,0xfe,0xe7,
    0xfe,0xe7,0xfe,0xe7,0xfe,0xe7,0xfe,0xe7,0xe5,0x04,0x00,0x00,0x01,0x04,0x00,0x00,
    0x06,0x4c,0x07,0x4d,0x06,0xe0,0xe0,0x68,0x40,0xf0,0x01,0x03,0x94,0xe8,0x07,0x00,
    0x98,0x47,0x10,0x34,0xac,0x42,0xf6,0xd3,0xff,0xf7,0x9e,0xff,0xc8,0x09,0x00,0x00,
    0xe8,0x09,0x00,0x00,0x01,0x48,0x02,0x49,0x08,0x60,0x70,0x47,0x00,0x90,0xd0,0x03,
    0x00,0x00,0x00,0x20,0x10,0xb5,0x00,0xf0,0x09,0xf9,0x10,0xb1,0x5c,0x48,0x5d,0x49,
    0x48,0x67,0x00,0xf0,0x1b,0xf9,0x28,0xb1,0x5b,0x48,0x00,0x68,0xc0,0xf3,0x42,0x30,
    0x5a,0x49,0x08,0x60,0x00,0xf0,0x3c,0xf9,0x28,0xb1,0x59,0x48,0x00,0x68,0x20,0xf0,
    0x80,0x70,0x57,0x49,0x08,0x60,0x00,0xf0,0x4b,0xf9,0x48,0xb1,0x00,0x20,0x55,0x49,
    0x08,0x60,0x4f,0xf0,0x80,0x41,0xc1,0xf8,0x10,0x01,0x50,0x49,0x09,0x1f,0x08,0x60,
    0x00,0xf0,0x68,0xf9,0x18,0xb1,0x03,0x20,0x4c,0x49,0x64,0x31,0x08,0x60,0x00,0xf0,
    0x79,0xf9,0x68,0xb1,0x05,0x20,0x4c,0x49,0x08,0x60,0x01,0x20,0x4a,0x49,0x78,0x31,
    0x08,0x60,0x00,0x20,0x48,0x49,0x08,0x31,0x08,0x60,0x3f,0x20,0x09,0x1f,0x08,0x60,
    0x00,0xf0,0x80,0xf9,0x00,0x28,0x55,0xd0,0x44,0x48,0x00,0x68,0x44,0x49,0x08,0x60,
    0x42,0x48,0x00,0x1d,0x00,0x68,0x09,0x1d,0x08,0x60,0x40,0x48,0x08,0x30,0x00,0x68,
    0x09,0x1d,0x08,0x60,0x3d,0x48,0x0c,0x30,0x00,0x68,0x09,0x1d,0x08,0x60,0x3b,0x48,
    0x10,0x30,0x00,0x68,0x09,0x1d,0x08,0x60,0x38,0x48,0x14,0x30,0x00,0x68,0x09,0x1d,
    0x08,0x60,0x36,0x48,0x18,0x30,0x00,0x68,0x35,0x49,0x20,0x31,0x08,0x60,0x33,0x48,
    0x1c,0x30,0x00,0x68,0x09,0x1d,0x08,0x60,0x30,0x48,0x20,0x30,0x00,0x68,0x09,0x1d,
    0x08,0x60,0x2e,0x48,0x24,0x30,0x00,0x68,0x09,0x1d,0x08,0x60,0x2b,0x48,0x28,0x30,
    0x00,0x68,0x09,0x1d,0x08,0x60,0x29,0x48,0x2c,0x30,0x00,0x68,0x09,0x1d,0x08,0x60,
    0x26,0x48,0x30,0x30,0x00,0x68,0x26,0x49,0x40,0x31,0x08,0x60,0x23,0x48,0x34,0x30,
    0x00,0x68,0x09,0x1d,0x08,0x60,0x21,0x48,0x38,0x30,0x00,0x68,0x09,0x1d,0x08,0x60,
    0x1e,0x48,0x3c,0x30,0x00,0x68,0x09,0x1d,0x08,0x60,0x1c,0x48,0x40,0x30,0x00,0x68,
    0x09,0x1d,0x08,0x60,0x00,0xf0,0x48,0xf8,0x30,0xb1,0x13,0x48,0x14,0x30,0x00,0x68,
    0x00,0xf0,0x4f,0x00,0x17,0x49,0x08,0x60,0x11,0x48,0x74,0x38,0x00,0x68,0x40,0xf4,
    0x70,0x00,0x0f,0x49,0x74,0x39,0x08,0x60,0x00,0xbf,0x00,0xbf,0x00,0xbf,0xbf,0xf3,
    0x4f,0x8f,0x00,0xbf,0x00,0xbf,0x00,0xbf,0x00,0xbf,0x00,0xbf,0x00,0xbf,0xbf,0xf3,
    0x6f,0x8f,0x00,0xbf,0x00,0xbf,0x00,0xbf,0xff,0xf7,0x3c,0xff,0x10,0xbd,0x00,0x00,
    0x0d,0xf0,0xad,0xba,0x00,0xc0,0x07,0x40,0x44,0x02,0x00,0x10,0x3c,0x05,0x00,0x40,
    0xfc,0xed,0x00,0xe0,0x0c,0x01,0x00,0x40,0x10,0x56,0x00,0x40,0x04,0x04,0x00,0x10,
    0x20,0xc5,0x00,0x40,0xe4,0x0e,0x00,0x40,0x02,0xe0,0x08,0xc8,0x12,0x1f,0x08,0xc1,
    0x00,0x2a,0xfa,0xd1,0x70,0x47,0x70,0x47,0x00,0x20,0x01,0xe0,0x01,0xc1,0x12,0x1f,
    0x00,0x2a,0xfb,0xd1,0x70,0x47,0x00,0x00,0x13,0x48,0x00,0x78,0x06,0x28,0x20,0xd1,
    0x11,0x48,0x00,0x1d,0x00,0x78,0x00,0xf0,0x0f,0x00,0xd0,0xb9,0x0e,0x48,0x08,0x30,
    0x00,0x78,0x00,0xf0,0xf0,0x00,0x30,0x28,0x01,0xd1,0x01,0x20,0x70,0x47,0x0a,0x48,
    0x08,0x30,0x00,0x78,0x00,0xf0,0xf0,0x00,0x40,0x28,0x01,0xd1,0x01,0x20,0xf5,0xe7,
    0x05,0x48,0x08,0x30,0x00,0x78,0x00,0xf0,0xf0,0x00,0x50,0x28,0x01,0xd1,0x01,0x20,
    0xec,0xe7,0x00,0x20,0xea,0xe7,0x00,0x00,0xe0,0x0f,0x00,0xf0,0x0a,0x48,0x00,0x78,
    0x06,0x28,0x0e,0xd1,0x08,0x48,0x00,0x1d,0x00,0x78,0x00,0xf0,0x0f,0x00,0x40,0xb9,
    0x05,0x48,0x08,0x30,0x00,0x78,0x00,0xf0,0xf0,0x00,0x30,0x28,0x01,0xd1,0x01,0x20,
    0x70,0x47,0x00,0x20,0xfc,0xe7,0x00,0x00,0xe0,0x0f,0x00,0xf0,0x13,0x48,0x00,0x78,
    0x06,0x28,0x20,0xd1,0x11,0x48,0x00,0x1d,0x00,0x78,0x00,0xf0,0x0f,0x00,0xd0,0xb9,
    0x0e,0x48,0x08,0x30,0x00,0x78,0x00,0xf0,0xf0,0x00,0x30,0x28,0x01,0xd1,0x01,0x20,
    0x70,0x47,0x0a,0x48,0x08,0x30,0x00,0x78,0x00,0xf0,0xf0,0x00,0x40,0x28,0x01,0xd1,
    0x01,0x20,0xf5,0xe7,0x05,0x48,0x08,0x30,0x00,0x78,0x00,0xf0,0xf0,0x00,0x50,0x28,
    0x01,0xd1,0x01,0x20,0xec,0xe7,0x00,0x20,0xea,0xe7,0x00,0x00,0xe0,0x0f,0x00,0xf0,
    0x0a,0x48,0x00,0x78,0x06,0x28,0x0e,0xd1,0x08,0x48,0x00,0x1d,0x00,0x78,0x00,0xf0,
    0x0f,0x00,0x40,0xb9,0x05,0x48,0x08,0x30,0x00,0x78,0x00,0xf0,0xf0,0x00,0x30,0x28,
    0x01,0xd1,0x01,0x20,0x70,0x47,0x00,0x20,0xfc,0xe7,0x00,0x00,0xe0,0x0f,0x00,0xf0,
    0x13,0x48,0x00,0x78,0x06,0x28,0x20,0xd1,0x11,0x48,0x00,0x1d,0x00,0x78,0x00,0xf0,
    0x0f,0x00,0xd0,0xb9,0x0e,0x48,0x08,0x30,0x00,0x78,0x00,0xf0,0xf0,0x00,0x30,0x28,
    0x01,0xd1,0x01,0x20,0x70,0x47,0x0a,0x48,0x08,0x30,0x00,0x78,0x00,0xf0,0xf0,0x00,
    0x40,0x28,0x01,0xd1,0x01,0x20,0xf5,0xe7,0x05,0x48,0x08,0x30,0x00,0x78,0x00,0xf0,
    0xf0,0x00,0x50,0x28,0x01,0xd1,0x01,0x20,0xec,0xe7,0x00,0x20,0xea,0xe7,0x00,0x00,
    0xe0,0x0f,0x00,0xf0,0x0a,0x48,0x00,0x78,0x06,0x28,0x0e,0xd1,0x08,0x48,0x00,0x1d,
    0x00,0x78,0x00,0xf0,0x0f,0x00,0x40,0xb9,0x05,0x48,0x08,0x30,0x00,0x78,0x00,0xf0,
    0xf0,0x00,0x30,0x28,0x01,0xd1,0x01,0x20,0x70,0x47,0x00,0x20,0xfc,0xe7,0x00,0x00,
    0xe0,0x0f,0x00,0xf0,0x0a,0x48,0x00,0x78,0x06,0x28,0x0e,0xd1,0x08,0x48,0x00,0x1d,
    0x00,0x78,0x00,0xf0,0x0f,0x00,0x40,0xb9,0x05,0x48,0x08,0x30,0x00,0x78,0x00,0xf0,
    0xf0,0x00,0x30,0x28,0x01,0xd1,0x01,0x20,0x70,0x47,0x00,0x20,0xfc,0xe7,0x00,0x00,
    0xe0,0x0f,0x00,0xf0,0x0a,0x48,0x00,0x78,0x06,0x28,0x0e,0xd1,0x08,0x48,0x00,0x1d,
    0x00,0x78,0x00,0xf0,0x0f,0x00,0x40,0xb9,0x05,0x48,0x08,0x30,0x00,0x78,0x00,0xf0,
    0xf0,0x00,0x50,0x28,0x01,0xd1,0x01,0x20,0x70,0x47,0x00,0x20,0xfc,0xe7,0x00,0x00,
    0xe0,0x0f,0x00,0xf0,0x0c,0x20,0x00,0xf0,0x65,0xf8,0x0c,0x20,0x01,0x21,0x81,0x40,
    0x28,0x4a,0x11,0x60,0x00,0xbf,0x11,0x20,0x00,0xf0,0x5c,0xf8,0x12,0x20,0x00,0xf0,
    0x59,0xf8,0x13,0x20,0x00,0xf0,0x56,0xf8,0x14,0x20,0x00,0xf0,0x53,0xf8,0x11,0x20,
    0x00,0xf0,0x66,0xf8,0x12,0x20,0x00,0xf0,0x63,0xf8,0x13,0x20,0x00,0xf0,0x60,0xf8,
    0x14,0x20,0x00,0xf0,0x5d,0xf8,0x33,0xe0,0x11,0x20,0x00,0xf0,0x61,0xf8,0x64,0x20,
    0x00,0xf0,0x32,0xf8,0x12,0x20,0x00,0xf0,0x5b,0xf8,0x64,0x20,0x00,0xf0,0x2c,0xf8,
    0x13,0x20,0x00,0xf0,0x55,0xf8,0x64,0x20,0x00,0xf0,0x26,0xf8,0x14,0x20,0x00,0xf0,
    0x4f,0xf8,0x64,0x20,0x00,0xf0,0x20,0xf8,0x11,0x20,0x00,0xf0,0x49,0xf8,0x64,0x20,
    0x00,0xf0,0x1a,0xf8,0x12,0x20,0x00,0xf0,0x43,0xf8,0x64,0x20,0x00,0xf0,0x14,0xf8,
    0x13,0x20,0x00,0xf0,0x3d,0xf8,0x64,0x20,0x00,0xf0,0x0e,0xf8,0x14,0x20,0x00,0xf0,
    0x37,0xf8,0x64,0x20,0x00,0xf0,0x08,0xf8,0x4f,0xf4,0x16,0x70,0x00,0xf0,0x04,0xf8,
    0xca,0xe7,0x00,0x00,0x0c,0x05,0x00,0x50,0x01,0xb5,0x06,0xe0,0x00,0x98,0x40,0x1e,
    0x00,0x90,0x40,0xf2,0xe7,0x30,0xff,0xf7,0x5d,0xfd,0x00,0x98,0x00,0x28,0xf5,0xd1,
    0x08,0xbd,0x00,0x00,0xf0,0xb5,0x01,0x21,0x0a,0x46,0x00,0x25,0x2c,0x46,0x2b,0x46,
    0x41,0xea,0x42,0x06,0x46,0xea,0x85,0x06,0x46,0xea,0x04,0x26,0x46,0xea,0x03,0x47,
    0x02,0x4e,0x46,0xf8,0x20,0x70,0x00,0xbf,0xf0,0xbd,0x00,0x00,0x00,0x07,0x00,0x50,
    0x01,0x21,0x81,0x40,0x01,0x4a,0x11,0x60,0x70,0x47,0x00,0x00,0x08,0x05,0x00,0x50,
    0x10,0xb5,0x01,0x46,0x01,0x22,0x02,0xfa,0x01,0xf0,0x06,0x4b,0x1a,0x68,0x20,0xea,
    0x02,0x03,0x04,0x4c,0x24,0x1d,0x23,0x60,0x02,0xea,0x00,0x03,0x24,0x1d,0x23,0x60,
    0x00,0xbf,0x10,0xbd,0x04,0x05,0x00,0x50,0xe8,0x09,0x00,0x00,0x00,0x00,0x00,0x20,
    0x04,0x00,0x00,0x00,0x88,0x06,0x00,0x00,0xec,0x09,0x00,0x00,0x04,0x00,0x00,0x20,
    0x04,0x20,0x00,0x00,0x98,0x06,0x00,0x00,0x00,0x90,0xd0,0x03,
};

uint8_t buff[sector_size] = {0};

#include "spi_driver.h"
#include "usart_driver.h"

extern ARM_DRIVER_USART Driver_USART1;
extern ARM_DRIVER_USART Driver_USART2;

static uint8_t rxBuffer[1024] = {0};
static uint8_t txBuffer[1024] = {0};
static uint8_t echo[] = "ECHO:";

#define code_bin led

int main(void)
{
    uint32_t addr;
    SystemInit();
    // spi_init();
    usart_init();
    Driver_USART1.Receive(rxBuffer, sizeof(rxBuffer));
    // Driver_USART2.Receive(rxBuffer, sizeof(rxBuffer));


    swd_init_debug();
    //  RCC_APB1PeriphClockCmd(RCC_APB2Periph_GPIOB, ENABLE);
    //  RCC_APB1PeriphClockCmd(RCC_APB2Periph_GPIOA, ENABLE);
    target_flash_init(Flash_Start_Addr);
    target_flash_erase_chip();
    // for(uint32_t addr = 0; addr < sizeof(binary); addr += 1024)
    // {
    //     target_flash_erase_sector(0x08000000 + addr);
    // }
    // for(addr = 0; addr < sizeof(code_bin); addr += sector_size)
    // {
    //     swd_read_memory(Flash_Start_Addr + addr, buff, sector_size);
    //     printf("Erase:");
    //     for(uint32_t i = 0; i < sector_size; i++) printf("%02X ", buff[i]);
    //     printf("\r\n");
    // }

    for(addr = 0; addr < sizeof(code_bin); addr += sector_size)
    {
        target_flash_program_page(Flash_Start_Addr + addr, &code_bin[addr], sector_size);
    }

    // for(addr = 0; addr < sizeof(code_bin); addr += sector_size)
    // {
    //     swd_read_memory(Flash_Start_Addr + addr, buff, sector_size);
    //     printf("Read:");
    //     for(uint32_t i = 0; i < sector_size; i++) printf("%02X ", buff[i]);
    //     printf("\r\n");
    // }
    swd_set_target_reset(0);//复位运行

    while(1)
    {

    }
}

void USART1_Callback(uint32_t event)
{
    if(event & ARM_USART_EVENT_RX_TIMEOUT)
    {
        Driver_USART1.Control(ARM_USART_ABORT_RECEIVE, 1);
        uint32_t length = Driver_USART1.GetRxCount();
        memcpy(txBuffer, rxBuffer, length);
        // spi_write(rxBuffer, length);
        Driver_USART1.Send(echo, sizeof(echo));
        Driver_USART1.Send(txBuffer, length);
        Driver_USART1.Receive(rxBuffer, sizeof(rxBuffer));
    }
}
int fputc(int ch, FILE *f)
{
    while(USART_GetFlagStatus(USART1, USART_FLAG_TXE) == RESET);
    USART_SendData(USART1, ch);
    return ch;
}


// void USART2_Callback(uint32_t event)
// {
//     if(event & ARM_USART_EVENT_RX_TIMEOUT)
//     {
//         Driver_USART2.Control(ARM_USART_ABORT_RECEIVE, 1);
//         uint32_t length = Driver_USART2.GetRxCount();
//         memcpy(txBuffer, rxBuffer, length);
//         Driver_USART2.Receive(rxBuffer, sizeof(rxBuffer));
//         Driver_USART1.Send(txBuffer, length);
//     }
// }

uint8_t demo1[988] =
{
    0X60, 0X02, 0X00, 0X20, 0X6D, 0X01, 0X00, 0X08, 0X71, 0X01, 0X00, 0X08, 0X73, 0X01, 0X00, 0X08
    , 0X75, 0X01, 0X00, 0X08, 0X77, 0X01, 0X00, 0X08, 0X79, 0X01, 0X00, 0X08, 0X00, 0X00, 0X00, 0X00
    , 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X7B, 0X01, 0X00, 0X08
    , 0X7D, 0X01, 0X00, 0X08, 0X00, 0X00, 0X00, 0X00, 0X7F, 0X01, 0X00, 0X08, 0X81, 0X01, 0X00, 0X08
    , 0X83, 0X01, 0X00, 0X08, 0X83, 0X01, 0X00, 0X08, 0X83, 0X01, 0X00, 0X08, 0X83, 0X01, 0X00, 0X08
    , 0X83, 0X01, 0X00, 0X08, 0X83, 0X01, 0X00, 0X08, 0X83, 0X01, 0X00, 0X08, 0X83, 0X01, 0X00, 0X08
    , 0X83, 0X01, 0X00, 0X08, 0X83, 0X01, 0X00, 0X08, 0X83, 0X01, 0X00, 0X08, 0X83, 0X01, 0X00, 0X08
    , 0X83, 0X01, 0X00, 0X08, 0X83, 0X01, 0X00, 0X08, 0X83, 0X01, 0X00, 0X08, 0X83, 0X01, 0X00, 0X08
    , 0X83, 0X01, 0X00, 0X08, 0X83, 0X01, 0X00, 0X08, 0X83, 0X01, 0X00, 0X08, 0X83, 0X01, 0X00, 0X08
    , 0X83, 0X01, 0X00, 0X08, 0X83, 0X01, 0X00, 0X08, 0X83, 0X01, 0X00, 0X08, 0X83, 0X01, 0X00, 0X08
    , 0X83, 0X01, 0X00, 0X08, 0X83, 0X01, 0X00, 0X08, 0X83, 0X01, 0X00, 0X08, 0X83, 0X01, 0X00, 0X08
    , 0X83, 0X01, 0X00, 0X08, 0X83, 0X01, 0X00, 0X08, 0X83, 0X01, 0X00, 0X08, 0X83, 0X01, 0X00, 0X08
    , 0X83, 0X01, 0X00, 0X08, 0X83, 0X01, 0X00, 0X08, 0X83, 0X01, 0X00, 0X08, 0X83, 0X01, 0X00, 0X08
    , 0X83, 0X01, 0X00, 0X08, 0X83, 0X01, 0X00, 0X08, 0X83, 0X01, 0X00, 0X08, 0X83, 0X01, 0X00, 0X08
    , 0X83, 0X01, 0X00, 0X08, 0X83, 0X01, 0X00, 0X08, 0X83, 0X01, 0X00, 0X08, 0X00, 0XF0, 0X02, 0XF8
    , 0X00, 0XF0, 0X2C, 0XF8, 0X0A, 0XA0, 0X90, 0XE8, 0X00, 0X0C, 0X82, 0X44, 0X83, 0X44, 0XAA, 0XF1
    , 0X01, 0X07, 0XDA, 0X45, 0X01, 0XD1, 0X00, 0XF0, 0X21, 0XF8, 0XAF, 0XF2, 0X09, 0X0E, 0XBA, 0XE8
    , 0X0F, 0X00, 0X13, 0XF0, 0X01, 0X0F, 0X18, 0XBF, 0XFB, 0X1A, 0X43, 0XF0, 0X01, 0X03, 0X18, 0X47
    , 0XAC, 0X02, 0X00, 0X00, 0XBC, 0X02, 0X00, 0X00, 0X00, 0X23, 0X00, 0X24, 0X00, 0X25, 0X00, 0X26
    , 0X10, 0X3A, 0X28, 0XBF, 0X78, 0XC1, 0XFB, 0XD8, 0X52, 0X07, 0X28, 0XBF, 0X30, 0XC1, 0X48, 0XBF
    , 0X0B, 0X60, 0X70, 0X47, 0X1F, 0XB5, 0X1F, 0XBD, 0X10, 0XB5, 0X10, 0XBD, 0X00, 0XF0, 0X03, 0XF9
    , 0X11, 0X46, 0XFF, 0XF7, 0XF7, 0XFF, 0X00, 0XF0, 0X23, 0XF8, 0X00, 0XF0, 0X21, 0XF9, 0X03, 0XB4
    , 0XFF, 0XF7, 0XF2, 0XFF, 0X03, 0XBC, 0X00, 0XF0, 0X29, 0XF9, 0X00, 0X00, 0X08, 0X48, 0X00, 0X47
    , 0XFE, 0XE7, 0XFE, 0XE7, 0XFE, 0XE7, 0XFE, 0XE7, 0XFE, 0XE7, 0XFE, 0XE7, 0XFE, 0XE7, 0XFE, 0XE7
    , 0XFE, 0XE7, 0XFE, 0XE7, 0X03, 0X48, 0X04, 0X49, 0X02, 0X4A, 0X04, 0X4B, 0X70, 0X47, 0X00, 0X00
    , 0XED, 0X00, 0X00, 0X08, 0X60, 0X00, 0X00, 0X20, 0X60, 0X02, 0X00, 0X20, 0X60, 0X00, 0X00, 0X20
    , 0X00, 0XF0, 0X88, 0XF8, 0X1E, 0X48, 0X80, 0X69, 0X40, 0XF0, 0X01, 0X00, 0X1C, 0X49, 0X88, 0X61
    , 0X08, 0X46, 0X80, 0X69, 0X40, 0XF0, 0X1C, 0X00, 0X88, 0X61, 0X4F, 0XF0, 0X33, 0X30, 0X19, 0X49
    , 0X08, 0X60, 0X09, 0X1F, 0X08, 0X60, 0X18, 0X49, 0X48, 0X60, 0X08, 0X60, 0X17, 0X49, 0X08, 0X60
    , 0X09, 0X1F, 0X08, 0X60, 0X16, 0X49, 0X08, 0X60, 0X09, 0X1F, 0X08, 0X60, 0X1E, 0XE0, 0X32, 0X20
    , 0X00, 0XF0, 0X35, 0XF8, 0X00, 0X20, 0X0F, 0X49, 0X08, 0X31, 0X08, 0X60, 0X10, 0X49, 0X08, 0X31
    , 0X08, 0X60, 0X0D, 0X49, 0XC8, 0X60, 0X0D, 0X49, 0X08, 0X31, 0X08, 0X60, 0X32, 0X20, 0X00, 0XF0
    , 0X26, 0XF8, 0X4F, 0XF0, 0XFF, 0X30, 0X07, 0X49, 0X08, 0X31, 0X08, 0X60, 0X08, 0X49, 0X08, 0X31
    , 0X08, 0X60, 0X05, 0X49, 0XC8, 0X60, 0X05, 0X49, 0X08, 0X31, 0X08, 0X60, 0XDF, 0XE7, 0X00, 0X00
    , 0X00, 0X10, 0X02, 0X40, 0X04, 0X0C, 0X01, 0X40, 0X00, 0X10, 0X01, 0X40, 0X04, 0X14, 0X01, 0X40
    , 0X04, 0X08, 0X01, 0X40, 0X01, 0X46, 0X05, 0XE0, 0X00, 0X20, 0X01, 0XE0, 0X42, 0X1C, 0XD0, 0XB2
    , 0X09, 0X28, 0XFB, 0XDB, 0X0A, 0X1E, 0XA1, 0XF1, 0X01, 0X01, 0XF5, 0XD1, 0X70, 0X47, 0X10, 0XB5
    , 0X04, 0X46, 0X03, 0XE0, 0X4F, 0XF4, 0X7A, 0X70, 0XFF, 0XF7, 0XEC, 0XFF, 0X20, 0X1E, 0XA4, 0XF1
    , 0X01, 0X04, 0XF7, 0XD1, 0X10, 0XBD, 0X00, 0X20, 0X34, 0X49, 0XC8, 0X60, 0X08, 0X61, 0X14, 0X20
    , 0X48, 0X61, 0X00, 0X20, 0X88, 0X61, 0XC8, 0X61, 0X08, 0X46, 0X00, 0X68, 0X40, 0XF0, 0X01, 0X00
    , 0X08, 0X60, 0X08, 0X46, 0X40, 0X68, 0X2E, 0X49, 0X08, 0X40, 0X2C, 0X49, 0X48, 0X60, 0X08, 0X46
    , 0X00, 0X68, 0X2C, 0X49, 0X08, 0X40, 0X29, 0X49, 0X08, 0X60, 0X08, 0X46, 0X00, 0X68, 0X20, 0XF4
    , 0X80, 0X20, 0X08, 0X60, 0X08, 0X46, 0X40, 0X68, 0X20, 0XF4, 0XFE, 0X00, 0X48, 0X60, 0X00, 0X20
    , 0X88, 0X60, 0X70, 0X47, 0X00, 0XB5, 0X00, 0X23, 0X00, 0X22, 0XFF, 0XF7, 0XD4, 0XFF, 0X1F, 0X48
    , 0X00, 0X68, 0X40, 0XF4, 0X80, 0X30, 0X1D, 0X49, 0X08, 0X60, 0X00, 0X22, 0X01, 0XE0, 0X50, 0X1C
    , 0XC2, 0XB2, 0X1A, 0X48, 0X00, 0X68, 0X40, 0X0C, 0X08, 0XB9, 0XC8, 0X2A, 0XF7, 0XDB, 0X1A, 0X48
    , 0X00, 0X68, 0X40, 0XF0, 0X32, 0X00, 0X18, 0X49, 0X08, 0X60, 0X14, 0X48, 0X40, 0X68, 0X17, 0X49
    , 0X08, 0X43, 0X12, 0X49, 0X48, 0X60, 0X08, 0X46, 0X00, 0X68, 0X40, 0XF0, 0X80, 0X70, 0X08, 0X60
    , 0X00, 0X22, 0X01, 0XE0, 0X50, 0X1C, 0XC2, 0XB2, 0X0C, 0X48, 0X00, 0X68, 0X40, 0X0E, 0X08, 0XB9
    , 0XC8, 0X2A, 0XF7, 0XDB, 0X09, 0X48, 0X40, 0X68, 0X40, 0XF0, 0X02, 0X00, 0X07, 0X49, 0X48, 0X60
    , 0X07, 0XE0, 0X06, 0X48, 0X40, 0X68, 0XC0, 0XF3, 0X87, 0X03, 0X50, 0X1C, 0XC2, 0XB2, 0X03, 0XF0
    , 0X03, 0X03, 0X02, 0X2B, 0X01, 0XD0, 0XC8, 0X2A, 0XF3, 0XDB, 0X00, 0XBD, 0X00, 0X10, 0X02, 0X40
    , 0X00, 0X00, 0XFF, 0XF8, 0XFF, 0XFF, 0XF6, 0XFE, 0X00, 0X20, 0X02, 0X40, 0X00, 0X24, 0X1D, 0X00
    , 0X70, 0X47, 0X70, 0X47, 0X70, 0X47, 0X75, 0X46, 0X00, 0XF0, 0X2C, 0XF8, 0XAE, 0X46, 0X05, 0X00
    , 0X69, 0X46, 0X53, 0X46, 0X20, 0XF0, 0X07, 0X00, 0X85, 0X46, 0X18, 0XB0, 0X20, 0XB5, 0XFF, 0XF7
    , 0X09, 0XFF, 0XBD, 0XE8, 0X20, 0X40, 0X4F, 0XF0, 0X00, 0X06, 0X4F, 0XF0, 0X00, 0X07, 0X4F, 0XF0
    , 0X00, 0X08, 0X4F, 0XF0, 0X00, 0X0B, 0X21, 0XF0, 0X07, 0X01, 0XAC, 0X46, 0XAC, 0XE8, 0XC0, 0X09
    , 0XAC, 0XE8, 0XC0, 0X09, 0XAC, 0XE8, 0XC0, 0X09, 0XAC, 0XE8, 0XC0, 0X09, 0X8D, 0X46, 0X70, 0X47
    , 0X10, 0XB5, 0X04, 0X46, 0XAF, 0XF3, 0X00, 0X80, 0X20, 0X46, 0XBD, 0XE8, 0X10, 0X40, 0XFF, 0XF7
    , 0XD6, 0XBE, 0X00, 0X00, 0X00, 0X48, 0X70, 0X47, 0X00, 0X00, 0X00, 0X20, 0X01, 0X49, 0X18, 0X20
    , 0XAB, 0XBE, 0XFE, 0XE7, 0X26, 0X00, 0X02, 0X00, 0X70, 0X47, 0X00, 0X00, 0XDC, 0X03, 0X00, 0X08
    , 0X00, 0X00, 0X00, 0X20, 0X60, 0X02, 0X00, 0X00, 0X28, 0X01, 0X00, 0X08
};

